<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agenda Quir√∫rgica</title>
  <link rel="icon" type="image/png" href="/uploads/logo-oftavision2.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    :root {
      --primary-color: #2c3e50;
      --secondary-color: #3498db;
      --accent-color: #e74c3c;
      --light-color: #f8f9fa;
      --dark-color: #343a40;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #f0f5ff 0%, #e3f2fd 100%);
      padding: 20px;
      color: #333;
      min-height: 100vh;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
    }
    
    header {
      text-align: center;
      margin-bottom: 30px;
      padding: 20px;
      background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
      color: white;
      border-radius: 10px;
      box-shadow: 0 6px 15px rgba(0,0,0,0.1);
    }
    
    h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
      font-weight: 700;
    }
    
    .description {
      font-size: 1.1rem;
      opacity: 0.9;
    }
    
    .card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.08);
      margin-bottom: 30px;
      overflow: hidden;
      border: none;
    }
    
    .card-header {
      background: linear-gradient(135deg, var(--primary-color) 0%, #3d5061 100%);
      color: white;
      padding: 18px 25px;
      font-size: 1.3rem;
      font-weight: 600;
      display: flex;
      align-items: center;
    }
    
    .card-header i {
      margin-right: 12px;
      font-size: 1.5rem;
    }
    
    .card-body {
      padding: 25px;
    }
    
    .btn {
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      border: none;
      border-radius: 8px;
      padding: 14px 25px;
      font-size: 1.1rem;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, var(--secondary-color) 0%, #2c80b9 100%);
      color: white;
      box-shadow: 0 4px 10px rgba(52, 152, 219, 0.3);
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(52, 152, 219, 0.4);
    }
    
    .btn-primary i {
      margin-right: 8px;
    }
    
    .btn-danger {
      background: linear-gradient(135deg, var(--accent-color) 0%, #c0392b 100%);
      color: white;
      box-shadow: 0 4px 10px rgba(231, 76, 60, 0.3);
    }
    
    .btn-danger:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(231, 76, 60, 0.4);
    }
    
    .btn-warning {
      background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
      color: white;
      box-shadow: 0 4px 10px rgba(243, 156, 18, 0.3);
    }
    
    .btn-warning:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(243, 156, 18, 0.4);
    }
    
    .btn-info {
      background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);
      color: white;
      box-shadow: 0 4px 10px rgba(23, 162, 184, 0.3);
    }
    
    .btn-info:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(23, 162, 184, 0.4);
    }
    
    .btn-sm {
      padding: 8px 15px;
      font-size: 0.9rem;
    }
    
.table {
  width: 100%;
  border-collapse: collapse;
  margin: 20px 0;
  background: white;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 6px 20px rgba(0,0,0,0.08);
}

.table th,
.table td {
  font-size: 0.85rem;  /* texto m√°s compacto */
  padding: 8px;        /* menos espacio */
  text-align: center;
}

/* Ajustes de ancho por columna */
.table th:nth-child(1), .table td:nth-child(1) { width: 5%; }   /* Expediente */
.table th:nth-child(2), .table td:nth-child(2) { width: 6%; }   /* Edad */
.table th:nth-child(3), .table td:nth-child(3) { width: 15%; }  /* Nombre */
.table th:nth-child(4), .table td:nth-child(4) { width: 12%; }  /* Procedimiento */
.table th:nth-child(5), .table td:nth-child(5) { width: 9%; }   /* Total Orden */
.table th:nth-child(6), .table td:nth-child(6) { width: 9%; }   /* Pagos */
.table th:nth-child(7), .table td:nth-child(7) { width: 9%; }   /* Diferencia */
.table th:nth-child(8), .table td:nth-child(8) { width: 8%; }   /* Status */
.table th:nth-child(9), .table td:nth-child(9) { width: 10%; }  /* Tipo de Lente */
.table th:nth-child(10), .table td:nth-child(10) { width: 10%; }/* Agendado */
.table th:nth-child(11), .table td:nth-child(11) { width: 12%; }/* Acciones */

    
    .table tr:last-child td {
      border-bottom: none;
    }
    
    .table tr:nth-child(odd) {
      background: #f9f9f9;
    }
    
    .table tr:hover {
      background-color: #eef6ff;
    }
    
    .success-alert {
      display: none;
      padding: 15px;
      background: #d4edda;
      color: #155724;
      border-radius: 8px;
      margin-bottom: 20px;
      border: 1px solid #c3e6cb;
    }
    
    .footer {
      text-align: center;
      margin-top: 40px;
      color: #6c757d;
      font-size: 0.9rem;
    }
    
    /* ==================== ESTILO CALENDARIO RUSO ==================== */
    .calendar-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 20px 0;
      padding: 15px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    
    .current-month {
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--primary-color);
    }
    
    /* Estilo del calendario ruso */
    .russian-calendar {
      background: #1a237e;
      color: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 6px 20px rgba(0,0,0,0.2);
    }
    
    .russian-header {
      background: #0d1452;
      padding: 15px 20px;
      text-align: center;
    }
    
    .russian-header h3 {
      margin: 0;
      font-size: 1.8rem;
      font-weight: bold;
    }
    
    .russian-header .subtitle {
      font-size: 1rem;
      opacity: 0.8;
    }
    
    .russian-week-days {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      background: #283593;
      font-weight: bold;
      text-align: center;
      padding: 10px 0;
    }
    
    .russian-week-day {
      padding: 8px;
      border-right: 1px solid #3949ab;
    }
    
    .russian-week-day:last-child {
      border-right: none;
    }
    
    .russian-days-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 1px;
      background: #3949ab;
    }
    
    .russian-day {
      background: #1a237e;
      min-height: 80px;
      padding: 8px;
      position: relative;
      cursor: pointer;
      transition: all 0.3s;
      border: 1px solid #3949ab;
    }
    
    .russian-day:hover {
      background: #283593;
      transform: scale(1.02);
    }
    
    .russian-day.empty {
      background: #151b5a;
      cursor: default;
    }
    
    .russian-day.empty:hover {
      background: #151b5a;
      transform: none;
    }
    
    .russian-day-number {
      font-size: 16px;
      font-weight: bold;
      margin-bottom: 5px;
    }
    
    .russian-event {
      font-size: 0.7rem;
      background: #e74c3c;
      padding: 2px 5px;
      border-radius: 3px;
      margin-top: 3px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    
    .russian-event.proc-catarata {
      background: #9c27b0;
    }
    
    .russian-event.proc-consulta {
      background: #2196f3;
    }
    
    .russian-event.proc-lente {
      background: #ff9800;
    }
    
    .russian-notes {
      background: #0d1452;
      padding: 15px;
      margin-top: 10px;
      border-radius: 0 0 8px 8px;
    }
    
    .russian-notes h4 {
      margin: 0 0 10px 0;
      font-size: 1.1rem;
    }
    
    .russian-notes ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    
    .russian-notes li {
      padding: 5px 0;
      border-bottom: 1px solid #283593;
    }
    
    .russian-notes li:last-child {
      border-bottom: none;
    }
    
    /* Colores por tipo de procedimiento */
    .proc-catarata { 
      background: #f5cbfd; 
      border-left: 4px solid #e46bf6; 
    }
    
    .proc-consulta { 
      background: #c9e7fd; 
      border-left: 4px solid #2196f3; 
    }
    
    .proc-lente { 
      background: #f7f9d2; 
      border-left: 4px solid #fbf866; 
    }
    
    .insumo-item {
      padding: 6px;
      margin-bottom: 6px;
      border-radius: 5px;
      font-size: 0.85rem;
    }
    
    .insumo-name {
      font-weight: 600;
    }
    
    .insumo-info {
      font-size: 0.8rem;
      color: #555;
    }
    
    .badge {
      font-size: 0.8rem;
      padding: 5px 10px;
      border-radius: 20px;
    }
    
    .modal-header {
      background: linear-gradient(135deg, var(--primary-color) 0%, #3d5061 100%);
      color: white;
    }
    
    @media (max-width: 768px) {
      h1 {
        font-size: 2rem;
      }
      
      .table-responsive {
        overflow-x: auto;
      }
      
      .card-header {
        font-size: 1.1rem;
        padding: 15px;
      }
      
      .calendar-nav {
        flex-direction: column;
        gap: 15px;
      }
      
      .russian-day {
        min-height: 60px;
        padding: 4px;
      }
      
      .russian-event {
        font-size: 0.6rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1><i class="fas fa-calendar-check"></i> Agenda Quir√∫rgica</h1>
      <p class="description">Gesti√≥n de cirug√≠as y procedimientos del sistema Oftavisi√≥n.</p>
    </header>

    <div class="success-alert" id="successAlert">
      <i class="fas fa-check-circle"></i> <span id="successMessage">Operaci√≥n realizada correctamente.</span>
    </div>

<!-- Tabla de √≥rdenes -->
<div class="card">
  <div class="card-header"><i class="fas fa-list"></i> √ìrdenes de Cirug√≠a</div>
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-bordered align-middle">
        <thead>
          <tr>
            <th>Expediente</th>
            <th>Edad</th>
            <th>Nombre</th>
            <th>Procedimiento</th>
            <th>Total Orden</th>
            <th>Pagos Realizados</th>
            <th>Diferencia</th>
            <th>Status</th>
            <th>Tipo de Lente</th>
            <th>Agendado</th> <!-- üîπ Nueva columna -->
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody id="tablaOrdenes"></tbody>
      </table>
    </div>
  </div>
</div>


    <!-- Modal Calendario -->
    <div class="modal fade" id="modalCalendario" tabindex="-1">
      <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title"><i class="fas fa-calendar"></i> Calendario de Cirug√≠as</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <div class="calendar-nav">
              <button class="btn btn-primary" onclick="cambiarMesCirugia(-1)">
                <i class="fas fa-chevron-left"></i> Mes anterior
              </button>
              <div class="current-month" id="mesCirugia"></div>
              <button class="btn btn-primary" onclick="cambiarMesCirugia(1)">
                Mes siguiente <i class="fas fa-chevron-right"></i>
              </button>
            </div>
            
            <!-- CALENDARIO ESTILO RUSO -->
            <div class="russian-calendar">
              <div class="russian-header">
                <h3>–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥</h3>
                <div class="subtitle">–ö–∞–ª–µ–Ω–¥–∞—Ä—å —Ö–∏—Ä—É—Ä–≥–∏–∏</div>
              </div>
              
              <div class="russian-week-days">
                <div class="russian-week-day">–ü–Ω</div>
                <div class="russian-week-day">–í—Ç</div>
                <div class="russian-week-day">–°—Ä</div>
                <div class="russian-week-day">–ß—Ç</div>
                <div class="russian-week-day">–ü—Ç</div>
                <div class="russian-week-day">–°–±</div>
                <div class="russian-week-day">–í—Å</div>
              </div>
              
              <div class="russian-days-grid" id="calendarioCirugias"></div>
              
              <div class="russian-notes">
                <h4>–û—Å–æ–±–æ–µ –º–Ω–µ–Ω–∏–µ</h4>
                <ul>
                  <li><strong>–•–∏—Ä—É—Ä–≥–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</strong></li>
                  <li><strong>–û—Å–Ω–æ–≤–Ω–æ–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å</strong></li>
                  <li><strong>–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã</strong></li>
                </ul>
              </div>
            </div>
            <!-- FIN CALENDARIO RUSO -->
            
          </div>
        </div>
      </div>
    </div>

    <div class="footer">
      <p>Sistema de Gesti√≥n Oftavisi√≥n &copy; 2025</p>
    </div>
  </div>

  <!-- Librer√≠as -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <script>
    // ====================== VARIABLES GLOBALES ======================
    let fechaCirugia = new Date();
    let ordenSeleccionada = null;

    // ====================== TABLA ======================
async function cargarOrdenes(year, month) {
  try {
    const res = await fetch('/api/ordenes');
    let ordenes = await res.json();

    // üîπ Si hay a√±o/mes, filtramos por ese mes
    if (year !== undefined && month !== undefined) {
      ordenes = ordenes.filter(o => {
        if (!o.fecha_cirugia) return true; // mostrar tambi√©n las que a√∫n no tienen fecha
        const f = new Date(o.fecha_cirugia);
        return f.getFullYear() === year && f.getMonth() === month;
      });
    }

    document.getElementById("tablaOrdenes").innerHTML = ordenes.map(o => `
      <tr>
        <td>${o.expediente}</td>
        <td>${o.edad}</td>
        <td>${o.nombre}</td>
        <td>${o.procedimiento}</td>
        <td>$${Number(o.total).toLocaleString("es-MX", {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
        <td>$${Number(o.pagos).toLocaleString("es-MX", {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
        <td>$${Number(o.total - o.pagos).toLocaleString("es-MX", {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>

        <td><span class="badge ${o.status === 'Completado' ? 'bg-success' : 'bg-warning'}">${o.status}</span></td>
        <td>
          ${o.tipo_lente 
            ? `<span class="badge bg-info" style="cursor:pointer" onclick="editarLente(${o.id}, '${o.tipo_lente}')">${o.tipo_lente}</span>` 
            : `<button class="btn btn-sm btn-secondary" 
                      onclick="editarLente(${o.id}, '')">
                 <i class="fas fa-plus-circle"></i> A√±adir Lente
               </button>`}
        </td>
        <td>
          ${o.fecha_cirugia 
            ? new Date(o.fecha_cirugia).toLocaleDateString("es-MX") 
            : '<span class="text-muted">No asignado</span>'}
        </td>
        <td>
          ${o.fecha_cirugia ? 
            '<span class="text-muted">Asignado</span>' : 
            `<button class="btn btn-sm btn-primary" 
                    onclick="abrirCalendario(${o.id})">
              <i class="fas fa-calendar-plus"></i> Agendar
            </button>`}
          ${o.fecha_cirugia ? `
            <button class="btn btn-sm btn-warning mt-1" 
                    onclick="editarCirugia(${o.id})">
              <i class="fas fa-edit"></i> Reprogramar
            </button>
          ` : ''}
        </td>
      </tr>
    `).join('');
  } catch (err) {
    console.error("Error cargando √≥rdenes:", err);
    mostrarError("Error", "No se pudieron cargar las √≥rdenes");
  }
}

    // ====================== CALENDARIO ======================
    document.addEventListener("DOMContentLoaded", () => {
      renderCalendarCirugias(); // carga inicial
    });

    function getColorClass(proc) {
      const texto = proc.toLowerCase();

      if (texto.includes("catarata")) return "proc-catarata";
      if (texto.includes("consulta")) return "proc-consulta";
      if (texto.includes("lente")) return "proc-lente";

      return "";
    }

    async function renderCalendarCirugias() {
      const calendario = document.getElementById("calendarioCirugias");
      const mesActual = document.getElementById("mesCirugia");

      const year = fechaCirugia.getFullYear();
      const month = fechaCirugia.getMonth();

      mesActual.textContent = fechaCirugia.toLocaleString("es-ES", { month: "long", year: "numeric" });

      const primerDia = new Date(year, month, 1).getDay() || 7;
      const diasEnMes = new Date(year, month + 1, 0).getDate();

      let cirugias = [];
      try {
        const res = await fetch("/api/cirugias");
        cirugias = await res.json();
      } catch (err) { 
        console.error(err); 
      }

      const filtradas = cirugias.filter(c => {
        const f = new Date(c.fecha);
        return f.getFullYear() === year && f.getMonth() === month;
      });

      calendario.innerHTML = "";

      // D√≠as vac√≠os al principio
      for (let i = 1; i < primerDia; i++) {
        calendario.innerHTML += `<div class="russian-day empty"></div>`;
      }

      // D√≠as del mes
      for (let d = 1; d <= diasEnMes; d++) {
        const fechaDia = new Date(year, month, d).toISOString().split("T")[0];
        const programadas = filtradas.filter(c => c.fecha.startsWith(fechaDia));

        let contenido = `<div class="russian-day" onclick="asignarFecha('${fechaDia}')">
                       <div class="russian-day-number">${d}</div>`;
        
        if (programadas.length > 0) {
          programadas.forEach(c => {
            const colorClass = getColorClass(c.procedimiento);
            contenido += `
              <div class="russian-event ${colorClass}">
                ${c.nombre.split(' ')[0]} - ${c.procedimiento.split(' ')[0]}
              </div>`;
          });
        }
        contenido += "</div>";
        calendario.innerHTML += contenido;
      }

      // üîπ Refrescar la tabla tambi√©n
      cargarOrdenes(year, month);
    }

    function cambiarMesCirugia(offset) {
      fechaCirugia.setMonth(fechaCirugia.getMonth() + offset);
      renderCalendarCirugias();
    }

    // ==================== AGENDAR CIRUG√çA ====================
    function agendarCirugia(idOrden) {
      Swal.fire({
        title: 'Asignar fecha de cirug√≠a',
        input: 'date',
        showCancelButton: true,
        confirmButtonText: 'Asignar',
        cancelButtonText: 'Cancelar'
      }).then(async (result) => {
        if (result.isConfirmed) {
          const fecha = result.value;
          try {
            await fetch(`/api/ordenes/${idOrden}/agendar`, {
              method: "PUT",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ fecha_cirugia: fecha })
            });
            mostrarExito("Cirug√≠a agendada", "La cirug√≠a ha sido agendada correctamente");
            renderCalendarCirugias();
          } catch (err) {
            console.error("Error al agendar:", err);
            mostrarError("Error", "No se pudo agendar la cirug√≠a");
          }
        }
      });
    }

    function editarCirugia(idOrden) {
      ordenSeleccionada = idOrden;
      const modal = new bootstrap.Modal(document.getElementById("modalCalendario"));
      modal.show();
    }

    // ==================== EDITAR TIPO DE LENTE ====================
    function editarLente(idOrden, tipoActual) {
      Swal.fire({
        title: tipoActual ? 'Editar Tipo de Lente' : 'A√±adir Tipo de Lente',
        input: 'text',
        inputValue: tipoActual || '',
        inputPlaceholder: 'Ejemplo: Lente Intraocular',
        showCancelButton: true,
        confirmButtonText: 'Guardar',
        cancelButtonText: 'Cancelar',
        preConfirm: (valor) => {
          if (!valor.trim()) {
            Swal.showValidationMessage('Debes ingresar un tipo de lente');
          }
          return valor;
        }
      }).then(async (result) => {
        if (result.isConfirmed) {
          try {
            await fetch(`/api/ordenes/${idOrden}/lente`, {
              method: "PUT",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ tipo_lente: result.value })
            });
            mostrarExito("Tipo de lente actualizado", "El tipo de lente fue actualizado correctamente");
            renderCalendarCirugias();
          } catch (err) {
            console.error("Error al actualizar tipo de lente:", err);
            mostrarError("Error", "No se pudo actualizar el tipo de lente");
          }
        }
      });
    }

    function abrirCalendario(idOrden) {
      ordenSeleccionada = idOrden;
      const modal = new bootstrap.Modal(document.getElementById("modalCalendario"));
      modal.show();
    }

    // ==================== ASIGNAR FECHA DESDE EL CALENDARIO ====================
    async function asignarFecha(fecha) {
      if (!ordenSeleccionada) return;

      try {
        await fetch(`/api/ordenes/${ordenSeleccionada}/agendar`, {
          method: "PUT",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ fecha_cirugia: fecha })
        });
        mostrarExito("Cirug√≠a asignada", `Fecha: ${fecha}`);

        ordenSeleccionada = null;
        renderCalendarCirugias();

        // Cierra el modal despu√©s de asignar
        const modal = bootstrap.Modal.getInstance(document.getElementById("modalCalendario"));
        modal.hide();
      } catch (err) {
        console.error("Error al asignar cirug√≠a:", err);
        mostrarError("Error", "No se pudo asignar la cirug√≠a");
      }
    }

    // ==================== ELIMINAR CIRUG√çA ====================
    function eliminarCirugia(idOrden) {
      Swal.fire({
        title: '¬øEliminar cirug√≠a?',
        text: "Esta acci√≥n no se puede deshacer.",
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#d33',
        cancelButtonColor: '#3085d6',
        confirmButtonText: 'S√≠, eliminar',
        cancelButtonText: 'Cancelar'
      }).then(async (result) => {
        if (result.isConfirmed) {
          try {
            await fetch(`/api/ordenes/${idOrden}/agendar`, {
              method: "PUT",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ fecha_cirugia: null })
            });
            mostrarExito("Cirug√≠a eliminada", "La cirug√≠a ha sido eliminada del calendario");
            renderCalendarCirugias();
          } catch (err) {
            console.error("Error al eliminar cirug√≠a:", err);
            mostrarError("Error", "No se pudo eliminar la cirug√≠a");
          }
        }
      });
    }

    // ==================== FUNCIONES DE NOTIFICACI√ìN ====================
    function mostrarExito(titulo, mensaje) {
      document.getElementById('successMessage').textContent = mensaje;
      document.getElementById('successAlert').style.display = 'block';
      
      setTimeout(() => {
        document.getElementById('successAlert').style.display = 'none';
      }, 5000);
      
      Swal.fire({
        icon: 'success',
        title: titulo,
        text: mensaje,
        timer: 3000,
        showConfirmButton: false
      });
    }

    function mostrarError(titulo, mensaje) {
      Swal.fire({
        icon: 'error',
        title: titulo,
        text: mensaje
      });
    }
  </script>
</body>
</html>