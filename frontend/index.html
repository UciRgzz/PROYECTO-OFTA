<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>OFTASIS - Sistema Integral de Gestión Oftalmológica</title>
<meta name="description" content="OFTASIS es el sistema del Instituto Oftavisión para la gestión integral de pacientes: citas, expedientes, reportes y control médico.">
<meta name="keywords" content="Oftasis, Instituto Oftavisión, sistema oftalmológico, gestión clínica, expedientes médicos, citas médicas, optometría, oftalmología">
<meta name="author" content="Instituto Oftavisión">

<!-- Open Graph (para Google, WhatsApp, Facebook, etc.) -->
<meta property="og:title" content="OFTASIS - Sistema Integral de Gestión Oftalmológica">
<meta property="og:description" content="Administra citas, expedientes, reportes y más con OFTASIS del Instituto Oftavisión.">
<meta property="og:image" content="https://oftavision.shop/uploads/logo-oftavision.png">
<meta property="og:url" content="https://oftavision.shop">
<meta property="og:type" content="website">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="OFTASIS - Sistema Integral de Gestión Oftalmológica">
<meta name="twitter:description" content="Sistema del Instituto Oftavisión para gestionar citas, expedientes y reportes médicos.">
<meta name="twitter:image" content="https://oftavision.shop/uploads/logo-oftavision.png">


  <!-- 👇 Favicon (logo empresa) -->
   <link rel="icon" type="image/png" href="/uploads/logo-oftavision2.png"> 
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
  <!-- Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  

  <style>
    body {
      font-family: 'Roboto', sans-serif;
      margin: 0;
      display: flex;
      min-height: 100vh;
      background: #f0f5ff;
    }
    .sidebar {
      width: 240px;
      background: linear-gradient(180deg, #1e2a32, #2c3e50);
      color: #fff;
      box-shadow: 3px 0 10px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    .sidebar-content {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
    }

    .sidebar .logout {
      padding: 15px 20px;
      border-top: 1px solid rgba(255,255,255,0.2);
    }

    .sidebar h2 {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 20px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .sidebar a {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 15px;
      color: #fff;
      text-decoration: none;
      padding: 10px;
      border-radius: 6px;
      margin-bottom: 6px;
      transition: all 0.2s;
    }

    .sidebar a:hover {
      background: #3498db;
    }

    .sidebar .material-icons {
      font-size: 20px;
    }

    .text-danger {
      color: #ff6b6b !important;
    }

    .main {
      flex: 1;
      padding: 20px;
      background: #f4f6f8;
      overflow-y: auto;
      padding-top: 80px; /* espacio para el header fijo */
    }

    iframe {
      width: 100%;
      height: 85vh;
      border: none;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }

    /* Modal */
    .modal-content {
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }

    .modal-header {
      background: linear-gradient(135deg, #2c3e50, #3498db);
      color: white;
    }

    .small-muted {
      font-size: .9rem;
      color: #6c757d;
    }

    /* Estilo para las opciones del selector de sucursal */
    #sucursal-selector .dropdown-menu {
      background-color: #fff;
      color: #000;
    }

    #sucursal-selector .dropdown-item {
      color: #000;
    }

    #sucursal-selector .dropdown-item:hover {
      background-color: #3498db;
      color: #fff;
    }

    /* Botones personalizados */
    .btn-editar { background: #0b335c; color: white; }
    .btn-editar:hover { background: #0f2c57; }

    .btn-medico { background: #0b335c; color: white; }
    .btn-medico:hover { background: #0f2c57; }

    .btn-opto { background: #0b335c; color: white; }
    .btn-opto:hover { background: #0f2c57; }

    /* Header reducido */
    #header-principal {
      position: fixed;
      top: 10px;
      right: 20px;
      left: auto;
      width: auto;
      height: auto;
      background: transparent !important;
      box-shadow: none !important;
      border: none !important;
      padding: 5px 10px;
      display: flex;
      align-items: center;
      gap: 15px;
      z-index: 1000;
    }

    /* 🔹 Ocultar header en todas las páginas excepto index */
    body:not(#index-page) #header-principal {
      display: none !important;
    }
  </style>
</head>
<body id="index-page">
  <!-- SIDEBAR -->
<div class="sidebar">
  <div class="sidebar-content">
    <h2>Menú</h2> 

    <!-- Selector de sucursal (solo admin) -->
    <div id="sucursal-selector" class="dropdown mb-3" style="display:none;">
      <button class="btn btn-light w-100 dropdown-toggle d-flex align-items-center" 
              type="button" data-bs-toggle="dropdown" aria-expanded="false" 
              id="sucursalBtn">
        <i class="material-icons me-2">business</i> 
        <span id="sucursalTexto">Sucursal</span>
      </button>
      <ul class="dropdown-menu w-100">
        <li><a class="dropdown-item" href="#" onclick="cambiarSucursal('admin')">Admin</a></li>
        <li><a class="dropdown-item" href="#" onclick="cambiarSucursal('Reynosa')">Reynosa</a></li>
        <li><a class="dropdown-item" href="#" onclick="cambiarSucursal('Yucatan')">Yucatán</a></li>
        <li><a class="dropdown-item" href="#" onclick="cambiarSucursal('Monterrey')">Monterrey</a></li>
      </ul>
    </div>

    <!-- 🔹 Aquí el menú se llenará dinámicamente -->
    <div id="menu-dinamico"></div>

    <!-- 🔹 Botón de Cerrar Sesión (siempre visible) -->
    <div class="mt-3 border-top pt-2">
      <button class="btn btn-danger w-100 d-flex align-items-center" onclick="cerrarSesion()">
        <i class="material-icons me-2">exit_to_app</i> 
        Cerrar Sesión
      </button>
    </div>
  </div>
</div>
<!-- 👆 Sidebar cerrado -->

<!-- CONTENEDOR PRINCIPAL -->
<div class="contenido" style="flex:1; display:flex; flex-direction:column;">

  <!-- HEADER (usuario + campana a la derecha) -->
  <div id="header-principal">
    
    <!-- Usuario -->
    <div class="user-info d-flex align-items-center">
      <div class="user-avatar" id="userAvatar" 
           style="background:#3498db;color:#fff;border-radius:50%;width:36px;height:36px;display:flex;align-items:center;justify-content:center;font-weight:bold;font-size:14px;">
      </div>
      <span id="nombreUsuario" 
            style="font-weight:500;color:#2c3e50;font-size:15px;margin-left:8px;"></span>
    </div>

    <!-- Notificaciones -->
    <div class="notifications position-relative">
      <i class="material-icons" id="bell" style="cursor:pointer;">notifications</i>
      <span class="badge bg-danger position-absolute top-0 start-100 translate-middle p-1 rounded-circle" 
            id="notif-count" 
            style="font-size:0.7rem; display:none;">0</span>
      <div class="dropdown-menu shadow" id="notif-dropdown" style="min-width:280px;">
        <p class="px-3 pt-2 fw-bold">Notificaciones</p>
        <ul class="list-unstyled mb-2" id="notif-list"></ul>
      </div>
    </div>
  </div>

  <!-- MAIN -->
  <div class="main" id="main-content">
    <h1>Cargando...</h1>
  </div>

</div>
</body>
</html>


<!-- MODAL ÓRDENES Y OPTOMETRÍA -->
<div class="modal fade" id="modalOrdenes" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Órdenes del Paciente</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>
      <div class="modal-body">
        <div id="contenedorOrdenes"></div>
      </div>
      <div class="modal-footer">
        <span class="small-muted me-auto">Se muestra primero el registro más reciente.</span>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>

<!-- BOOTSTRAP SCRIPTS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="styles.css">

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="dist/bundle.min.js"></script>

